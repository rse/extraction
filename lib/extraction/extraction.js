/*
**  Extraction -- Tree Extraction for JavaScript Object Graphs
**  Copyright (c) 2015-2019 Dr. Ralf S. Engelschall <rse@engelschall.com>
**
**  Permission is hereby granted, free of charge, to any person obtaining
**  a copy of this software and associated documentation files (the
**  "Software"), to deal in the Software without restriction, including
**  without limitation the rights to use, copy, modify, merge, publish,
**  distribute, sublicense, and/or sell copies of the Software, and to
**  permit persons to whom the Software is furnished to do so, subject to
**  the following conditions:
**
**  The above copyright notice and this permission notice shall be included
**  in all copies or substantial portions of the Software.
**
**  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
**  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
**  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
**  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
**  CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
**  TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
**  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/

(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Extraction = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(_dereq_,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).ASTY=e()}}(function(){return function(){return function e(n,t,r){function o(a,u){if(!t[a]){if(!n[a]){var f="function"==typeof _dereq_&&_dereq_;if(!u&&f)return f(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=t[a]={exports:{}};n[a][0].call(c.exports,function(e){return o(n[a][1][e]||e)},c,c.exports,e,n,t,r)}return t[a].exports}for(var i="function"==typeof _dereq_&&_dereq_,a=0;a<r.length;a++)o(r[a]);return o}}()({1:[function(e,n,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,n,t){n&&o(e.prototype,n),t&&o(e,t)}(e,[{key:"init",value:function(e,n,t,o){if(arguments.length<2)throw new Error("init: invalid number of arguments");if(this.ctx=e,this.ASTy=!0,this.T=n,this.L={L:0,C:0,O:0},this.A={},this.C=[],this.P=null,"object"===r(t))for(var i in t)t.hasOwnProperty(i)&&this.set(i,t[i]);return"object"===r(o)&&o instanceof Array&&this.add(o),this}},{key:"create",value:function(e,n,t){return this.ctx.create(e,n,t)}},{key:"type",value:function(e){if(0===arguments.length)return this.T;if(1===arguments.length)return this.T=e,this;throw new Error("type: invalid number of arguments")}},{key:"pos",value:function(e,n,t){if(0===arguments.length)return{line:this.L.L,column:this.L.C,offset:this.L.O};if(arguments.length<=3)return this.L.L=e||0,this.L.C=n||0,this.L.O=t||0,this;throw new Error("pos: invalid number of arguments")}},{key:"set",value:function(){for(var e=this,n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];if(1===t.length&&"object"===r(t[0]))Object.keys(t[0]).forEach(function(n){void 0!==t[0][n]?e.A[n]=t[0][n]:delete e.A[n]});else{if(2!==t.length)throw new Error("set: invalid number of arguments");void 0!==t[1]?this.A[t[0]]=t[1]:delete this.A[t[0]]}return this}},{key:"unset",value:function(){for(var e=this,n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];if(1===t.length&&"object"===r(t[0])&&t[0]instanceof Array)t[0].forEach(function(n){delete e.A[n]});else{if(1!==t.length)throw new Error("unset: invalid number of arguments");delete this.A[t[0]]}return this}},{key:"get",value:function(){for(var e=this,n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];if(1!==t.length)throw new Error("get: invalid number of arguments");if("object"===r(t[0])&&t[0]instanceof Array)return t[0].map(function(n){if("string"!=typeof n)throw new Error("get: invalid key argument");return e.A[n]});var i=t[0];if("string"!=typeof i)throw new Error("get: invalid key argument");return this.A[i]}},{key:"attrs",value:function(){return Object.keys(this.A)}},{key:"nth",value:function(){if(null===this.P)return 1;var e=this.P.C.indexOf(this);if(e<0)throw new Error("nth: internal error -- node not in childs of its parent");return e}},{key:"ins",value:function(e){for(var n=this,t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];if(0===o.length)throw new Error("ins: invalid number of arguments");if(e<0&&(e=this.C.length+1-e),!(e>=0&&e<=this.C.length))throw new Error("ins: invalid position");var a=function(t){if(!n.ctx.isA(t))throw new Error("ins: invalid AST node argument");n.C.splice(e++,0,t),t.P=n};return o.forEach(function(e){"object"===r(e)&&e instanceof Array?e.forEach(function(e){a(e)}):null!==e&&a(e)}),this}},{key:"add",value:function(){for(var e=this,n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];if(0===t.length)throw new Error("add: invalid number of arguments");var i=function(n){if(!e.ctx.isA(n))throw new Error("add: invalid AST node argument");e.C.push(n),n.P=e};return t.forEach(function(e){"object"===r(e)&&e instanceof Array?e.forEach(function(e){i(e)}):null!==e&&i(e)}),this}},{key:"del",value:function(){for(var e=this,n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];if(0===t.length)throw new Error("del: invalid number of arguments");return t.forEach(function(n){if(!e.ctx.isA(n))throw new Error("del: invalid AST node argument");for(var t=!1,r=0;r<e.C.length;r++)if(e.C[r]===n){e.C.splice(r,1),n.P=null,t=!0;break}if(!t)throw new Error("del: AST node not found in childs")}),this}},{key:"childs",value:function(){if(arguments.length>2)throw new Error("childs: invalid number of arguments");if(2===arguments.length&&"number"==typeof(arguments.length<=0?void 0:arguments[0])&&"number"==typeof(arguments.length<=1?void 0:arguments[1]))return this.C.slice(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]);if(1===arguments.length&&"number"==typeof(arguments.length<=0?void 0:arguments[0]))return this.C.slice(arguments.length<=0?void 0:arguments[0]);if(0===arguments.length)return this.C;throw new Error("childs: invalid type of arguments")}},{key:"child",value:function(e){if("number"!=typeof e)throw new Error("child: invalid argument");return e<this.C.length?this.C[e]:null}},{key:"parent",value:function(){return this.P}},{key:"serialize",value:function(){return this.ctx.__serialize(this)}}]),e}();t.default=i},{}],2:[function(e,n,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={mid:{unicode:String.fromCharCode(9500),ascii:"+"},last:{unicode:String.fromCharCode(9492),ascii:"+"},down:{unicode:String.fromCharCode(9474),ascii:"|"},left:{unicode:String.fromCharCode(9472),ascii:"-"}},a=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,n,t){n&&o(e.prototype,n),t&&o(e,t)}(e,[{key:"dump",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,n){return n},t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o="",a=this;return this.walk(function(u,f){if(!(f>e)){if(f>0){var l=function(e){var n=0,t=0;return null!==e.P&&(n=e.P.C.indexOf(e),t=e.P.C.length-1),{nth:n,max:t}},c=l(u),s=c.nth,h=c.max,d=" ";d=t?"".concat(i.left.unicode).concat(i.left.unicode).concat(d):"".concat(i.left.ascii).concat(i.left.ascii).concat(d),d=s<h?"".concat(t?i.mid.unicode:i.mid.ascii).concat(d):"".concat(t?i.last.unicode:i.last.ascii).concat(d);for(var y=u.P;null!==y&&y!==a;y=y.P)if(null!==y.P){var v=l(y);d=v.nth<v.max?"".concat(t?i.down.unicode:i.down.ascii,"   ").concat(d):"    ".concat(d)}o+=n("tree",d)}o+=n("type",u.T)+" ";var p=Object.keys(u.A);if(p.length>0){o+=n("parenthesis","(");var b=!0;p.forEach(function(e){b?b=!1:o+=n("comma",",")+" ",o+=n("key",e)+n("colon",":")+" ";var t=u.A[e];switch(r(t)){case"boolean":case"number":o+=n("value",t.toString());break;case"string":var i=function(e){return e.charCodeAt(0).toString(16).toUpperCase()};o+=n("value",'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+i(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+i(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+i(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+i(e)})+'"');break;case"object":t instanceof RegExp?o+=n("value","/"+t.source+"/"):o+=n("value",JSON.stringify(t));break;default:o+=n("value",JSON.stringify(t))}}),o+=n("parenthesis",")")+" "}o+=n("position",n("bracket","[")+n("line",u.L.L)+n("slash",",")+n("column",u.L.C)+n("bracket","]")),o+="\n"}},"downward"),o}}]),e}();t.default=a},{}],3:[function(e,n,t){"use strict";function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,n,t){n&&r(e.prototype,n),t&&r(e,t)}(e,[{key:"merge",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null===e)return this;if(!this.ctx.isA(e))throw new Error("merge: invalid AST node argument");if(t){var o=e.pos();this.pos(o.line,o.column,o.offset)}e.attrs().forEach(function(t){var o=void 0!==r[t]?r[t]:t;null!==o&&n.set(o,e.get(t))}),e.childs().forEach(function(t){e.del(t),n.add(t)});var i=e.parent();return null!==i&&i.del(e),this}}]),e}();t.default=o},{}],4:[function(e,n,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,n,t){n&&o(e.prototype,n),t&&o(e,t)}(e,null,[{key:"serialize",value:function(e,n){if(!e.isA(n))throw new Error("serialize: not an ASTy node");return JSON.stringify({ASTy:function e(n){var t={T:n.T,L:{L:n.L.L,C:n.L.C,O:n.L.O}},o=Object.keys(n.A);return o.length>0&&(t.A={},o.forEach(function(e){var o=n.A[e];switch(r(o)){case"boolean":case"number":case"string":t.A[e]=o;break;default:t.A[e]=JSON.parse(JSON.stringify(o))}})),n.C.length>0&&(t.C=n.C.map(function(n){return e(n)})),t}(n)})}},{key:"unserialize",value:function(e,n){var t=JSON.parse(n);if("object"!==r(t)||"object"!==r(t.ASTy))throw new Error("unserialize: not an ASTy JSON export");return function n(t){var o=e.create(t.T);return o.pos(t.L.L,t.L.C,t.L.O),"object"===r(t.A)&&Object.keys(t.A).forEach(function(e){var n=t.A[e];switch(r(n)){case"boolean":case"number":case"string":o.set(e,n);break;default:o.set(e,JSON.parse(JSON.stringify(n)))}}),"object"===r(t.C)&&t.C instanceof Array&&o.add(t.C.map(function(e){return n(e)})),o}(t.ASTy)}}]),e}();t.default=i},{}],5:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={major:1,minor:8,micro:6,date:20190616};t.default=r},{}],6:[function(e,n,t){"use strict";function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,n,t){n&&r(e.prototype,n),t&&r(e,t)}(e,[{key:"walk",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"downward";return function t(r,o,i){"downward"!==n&&"both"!==n||e(r,o,i,"downward"),r.C.forEach(function(e){t(e,o+1,r)}),"upward"!==n&&"both"!==n||e(r,o,i,"upward")}(this,0,null),this}}]),e}();t.default=o},{}],7:[function(e,n,t){"use strict";var r=l(e("./asty-base.js")),o=l(e("./asty-merge.js")),i=l(e("./asty-walk.js")),a=l(e("./asty-dump.js")),u=l(e("./asty-serialize.js")),f=l(e("./asty-version.js"));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function h(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(){var n=this;return s(this,e),this.ASTYNode=function e(){s(this,e)},[[r.default,"init","create","type","pos","set","unset","get","attrs","nth","ins","add","del","childs","child","parent","serialize"],[o.default,"merge"],[i.default,"walk"],[a.default,"dump"]].forEach(function(e){var t=e[0].prototype;e.slice(1).forEach(function(e){n.ASTYNode.prototype[e]=t[e]})}),this}return function(e,n,t){n&&h(e.prototype,n),t&&h(e,t)}(e,[{key:"version",value:function(){return f.default}},{key:"extend",value:function(e){for(var n in e)e.hasOwnProperty(n)&&(this.ASTYNode.prototype[n]=e[n]);return this}},{key:"create",value:function(e,n,t){return(new this.ASTYNode).init(this,e,n,t)}},{key:"isA",value:function(e){return"object"===c(e)&&e instanceof this.ASTYNode&&"boolean"==typeof e.ASTy&&!0===e.ASTy}},{key:"__serialize",value:function(n){return e.serialize(n)}}],[{key:"serialize",value:function(e){return u.default.serialize(e.ctx,e)}},{key:"unserialize",value:function(e){return u.default.unserialize(new this,e)}}]),e}();n.exports=d},{"./asty-base.js":1,"./asty-dump.js":2,"./asty-merge.js":3,"./asty-serialize.js":4,"./asty-version.js":5,"./asty-walk.js":6}]},{},[1,2,3,4,5,6,7])(7)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],2:[function(_dereq_,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).CacheLRU=e()}}(function(){return function(){return function e(t,i,n){function r(u,s){if(!i[u]){if(!t[u]){var l="function"==typeof _dereq_&&_dereq_;if(!s&&l)return l(u,!0);if(o)return o(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var a=i[u]={exports:{}};t[u][0].call(a.exports,function(e){return r(t[u][1][e]||e)},a,a.exports,e,t,i,n)}return i[u].exports}for(var o="function"==typeof _dereq_&&_dereq_,u=0;u<n.length;u++)r(n[u]);return r}}()({1:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._index={},this._LRU={newer:null},this._MRU={older:null},this._LRU.newer=this._MRU,this._MRU.older=this._LRU,this._cur=0,this._max=1/0,this._dispose=function(){},this}return function(e,t,i){t&&n(e.prototype,t),i&&n(e,i)}(e,[{key:"limit",value:function(e){var t=this._max;return arguments.length>0&&(this._max=e,this._purge()),t}},{key:"dispose",value:function(e){return this._dispose=e,this}},{key:"length",value:function(){return this._cur}},{key:"keys",value:function(){return this.each(function(e,t){this.push(t)},[])}},{key:"values",value:function(){return this.each(function(e){this.push(e)},[])}},{key:"each",value:function(e,t){arguments<2&&(t=this);for(var i=0,n=this._MRU.older;n!==this._LRU;)e.call(t,n.val,n.key,i++),n=n.older;return t}},{key:"has",value:function(e){return void 0!==this._index[e]}},{key:"peek",value:function(e){var t=this._index[e];if(void 0!==t){if(!(t.expires<Date.now()))return t.val;this.del(t.key)}}},{key:"touch",value:function(e){var t=this._index[e];if(void 0===t)throw new Error("touch: no such item");return this._promote(t),this}},{key:"get",value:function(e){var t=this._index[e];if(void 0!==t){if(!(t.expires<Date.now()))return this._promote(t),t.val;this.del(t.key)}}},{key:"set",value:function(e,t,i){arguments.length<3&&(i=1/0),i+=Date.now();var n=this._index[e];if(void 0===n)n={older:null,newer:null,key:e,val:t,expires:i},this._index[e]=n,this._attach(n),this._cur++,this._purge();else{var r=n.val;n.val=t,this._promote(n),this._dispose.call(void 0,n.key,r,"set")}return this}},{key:"del",value:function(e){var t=this._index[e];if(void 0===t)throw new Error("del: no such item");return delete this._index[e],this._detach(t),this._cur--,this._dispose.call(void 0,e,t.val,"del"),this}},{key:"clear",value:function(){for(;this._cur>0;)this.del(this._LRU.newer.key);return this}},{key:"_purge",value:function(){for(;this._cur>this._max;)this.del(this._LRU.newer.key)}},{key:"_promote",value:function(e){this._detach(e),this._attach(e)}},{key:"_detach",value:function(e){e.older.newer=e.newer,e.newer.older=e.older,e.older=null,e.newer=null}},{key:"_attach",value:function(e){e.older=this._MRU.older,e.newer=this._MRU,e.newer.older=e,e.older.newer=e}}]),e}();t.exports=r},{}]},{},[1])(1)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],3:[function(_dereq_,module,exports){
(function (global){
!function(n,t,o){"object"==typeof module&&"object"==typeof module.exports?module.exports=o():"function"==typeof define&&void 0!==define.amd?define("PEGUtil",function(){return o()}):n.PEGUtil=o()}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,0,function(){var n={makeAST:function(n,t){return function(){return t.util.__makeAST.call(null,n().start.line,n().start.column,n().start.offset,arguments)}},makeUnroll:function(n,t){return function(o,r,e){if("object"!=typeof r||!(r instanceof Array))throw new t.util.__SyntaxError("unroll: invalid list argument for unrolling",typeof r,"Array",n());if(void 0!==e){"number"==typeof e&&(e=[e]);var u=[];null!==o&&u.push(o);for(var a=0;a<r.length;a++)for(var i=0;i<e.length;i++)u.push(r[a][e[i]]);return u}return null!==o&&r.unshift(o),r}}},t=function(n,t){var o=n.length,r=t-20;r<0&&(r=0);var e=t+20;e>o&&(e=o);var u=function(n){return n.charCodeAt(0).toString(16).toUpperCase()},a=function(n,t,o){return n.substr(t,o).replace(/\\/g,"\\\\").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(n){return"\\x0"+u(n)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(n){return"\\x"+u(n)}).replace(/[\u0100-\u0FFF]/g,function(n){return"\\u0"+u(n)}).replace(/[\u1000-\uFFFF]/g,function(n){return"\\u"+u(n)})};return{prolog:a(n,r,t-r),token:a(n,t,1),epilog:a(n,t+1,e-(t+1))}};return n.parse=function(o,r,e){if("object"!=typeof o)throw new Error("invalid parser object (not an object)");if("function"!=typeof o.parse)throw new Error('invalid parser object (no "parse" function)');if("string"!=typeof r)throw new Error("invalid input text (not a string)");if(void 0!==e&&"object"!=typeof e)throw new Error("invalid options (not an object)");void 0===e&&(e={});var u={ast:null,error:null};try{var a;a="function"==typeof e.makeAST?e.makeAST:function(n,t){return{line:n().start.line,column:n().start.column,offset:n().start.offset,args:t}},e.util={makeUnroll:n.makeUnroll,makeAST:n.makeAST,__makeAST:a,__SyntaxError:o.SyntaxError},u.ast=o.parse(r,e),u.error=null}catch(n){if(u.ast=null,n instanceof o.SyntaxError){var i=function(n,t){return void 0!==n?n:t};u.error={line:i(n.location.start.line,0),column:i(n.location.start.column,0),message:n.message,found:i(n.found,""),expected:i(n.expected,""),location:t(r,i(n.location.start.offset,0))}}else u.error={line:0,column:0,message:n.message,found:"",expected:"",location:t("",0)}}return u},n.errorMessage=function(n,t){for(var o=n.location,r="line "+n.line+" (column "+n.column+"): ",e="",u=0;u<r.length+o.prolog.length;u++)e+="-";return r+o.prolog+o.token+o.epilog+"\n"+e+"^\n"+n.message+(t?"":"\n")},n});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],4:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=dsl2ast;var _asty=_interopRequireDefault(_dereq_("asty")),_pegjsUtil=_interopRequireDefault(_dereq_("pegjs-util")),_cacheLru=_interopRequireDefault(_dereq_("cache-lru"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var n=0,a=new Array(t.length);n<t.length;n++)a[n]=t[n];return a}}var PEGparser=function(){function t(n,a,h,f){this.message=n,this.expected=a,this.found=h,this.location=f,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}return function(t,n){function a(){this.constructor=t}a.prototype=n.prototype,t.prototype=new a}(t,Error),t.buildMessage=function(t,n){var a={literal:function(t){return'"'+f(t.text)+'"'},class:function(t){var n,a="";for(n=0;n<t.parts.length;n++)a+=t.parts[n]instanceof Array?r(t.parts[n][0])+"-"+r(t.parts[n][1]):r(t.parts[n]);return"["+(t.inverted?"^":"")+a+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function h(t){return t.charCodeAt(0).toString(16).toUpperCase()}function f(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+h(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+h(t)})}function r(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+h(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+h(t)})}return"Expected "+function(t){var n,h,f,r=new Array(t.length);for(n=0;n<t.length;n++)r[n]=(f=t[n],a[f.type](f));if(r.sort(),r.length>0){for(n=1,h=1;n<r.length;n++)r[n-1]!==r[n]&&(r[h]=r[n],h++);r.length=h}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(t)+" but "+function(t){return t?'"'+f(t)+'"':"end of input"}(n)+" found."},{SyntaxError:t,parse:function(n,a){a=void 0!==a?a:{};var h,f={},r={spec:Mt},d=Mt,o="{",y=Rt("{",!1),x="}",b=Rt("}",!1),v=function(t){return Vt("Object").add(t)},m="[",S=Rt("[",!1),_="]",C=Rt("]",!1),w=function(t){return Vt("Array").add(t)},T="->",j=Rt("->",!1),R=function(t){return Vt("Depth").set({depth:t})},U=",",G=Rt(",",!1),q=function(t,n){return Qt(t,n,3)},O=":",k=Rt(":",!1),B=function(t,n){return t.add(n)},M="!",z=Rt("!",!1),Z=function(t,n){return null!==t&&n.set({not:!0}),n},H=function(t){return Vt("Property").set({id:t})},W="*",J=Rt("*",!1),K=function(){return Vt("Property").set({any:!0})},N="..",Q=Rt("..",!1),V=function(t,n){return Vt("Property").set({from:t,to:n})},X=function(t){return Vt("Property").set({from:t,to:t})},Y="-",l=Rt("-",!1),u=/^[0-9]/,i=Ut([["0","9"]],!1,!1),c=function(t){return parseInt(t,10)},A="-oo",E=Rt("-oo",!1),D=function(t){return-1/0},L="oo",I=Rt("oo",!1),P=function(t){return 1/0},e=/^[$a-zA-Z_]/,F=Ut(["$",["a","z"],["A","Z"],"_"],!1,!1),g=/^[$a-zA-Z0-9_]/,p=Ut(["$",["a","z"],["A","Z"],["0","9"],"_"],!1,!1),$=Gt("blank"),s=Gt("comment"),tt="//",nt=Rt("//",!1),at=/^[\r\n]/,ht=Ut(["\r","\n"],!1,!1),ft={type:"any"},rt="/*",dt=Rt("/*",!1),ot="*/",yt=Rt("*/",!1),xt=Gt("whitespaces"),bt=/^[ \t\r\n]/,vt=Ut([" ","\t","\r","\n"],!1,!1),mt=0,St=0,_t=[{line:1,column:1}],Ct=0,wt=[],Tt=0;if("startRule"in a){if(!(a.startRule in r))throw new Error("Can't start parsing from rule \""+a.startRule+'".');d=r[a.startRule]}function jt(){return Ot(St,mt)}function Rt(t,n){return{type:"literal",text:t,ignoreCase:n}}function Ut(t,n,a){return{type:"class",parts:t,inverted:n,ignoreCase:a}}function Gt(t){return{type:"other",description:t}}function qt(t){var a,h=_t[t];if(h)return h;for(a=t-1;!_t[a];)a--;for(h={line:(h=_t[a]).line,column:h.column};a<t;)10===n.charCodeAt(a)?(h.line++,h.column=1):h.column++,a++;return _t[t]=h,h}function Ot(t,n){var a=qt(t),h=qt(n);return{start:{offset:t,line:a.line,column:a.column},end:{offset:n,line:h.line,column:h.column}}}function kt(t){mt<Ct||(mt>Ct&&(Ct=mt,wt=[]),wt.push(t))}function Bt(n,a,h){return new t(t.buildMessage(n,a),n,a,h)}function Mt(){var t;return(t=function(){var t,a,h,r,d;return t=mt,(a=Jt())!==f?(123===n.charCodeAt(mt)?(h=o,mt++):(h=f,0===Tt&&kt(y)),h!==f&&Jt()!==f?((r=zt())===f&&(r=null),r!==f&&Jt()!==f?(125===n.charCodeAt(mt)?(d=x,mt++):(d=f,0===Tt&&kt(b)),d!==f&&Jt()!==f?(St=t,a=v(r),t=a):(mt=t,t=f)):(mt=t,t=f)):(mt=t,t=f)):(mt=t,t=f),t}())===f&&(t=function(){var t,a,h,r,d;return t=mt,(a=Jt())!==f?(91===n.charCodeAt(mt)?(h=m,mt++):(h=f,0===Tt&&kt(S)),h!==f&&Jt()!==f?((r=zt())===f&&(r=null),r!==f&&Jt()!==f?(93===n.charCodeAt(mt)?(d=_,mt++):(d=f,0===Tt&&kt(C)),d!==f&&Jt()!==f?(St=t,a=w(r),t=a):(mt=t,t=f)):(mt=t,t=f)):(mt=t,t=f)):(mt=t,t=f),t}()),t}function zt(){var t,a,h,r,d,o,y,x;if(t=mt,n.substr(mt,2)===T?(a=T,mt+=2):(a=f,0===Tt&&kt(j)),a!==f&&(h=Jt())!==f&&(r=Wt())!==f?(St=t,t=a=R(r)):(mt=t,t=f),t===f)if(t=mt,(a=Zt())!==f){for(h=[],r=mt,(d=Jt())!==f?(44===n.charCodeAt(mt)?(o=U,mt++):(o=f,0===Tt&&kt(G)),o!==f&&(y=Jt())!==f&&(x=Zt())!==f?r=d=[d,o,y,x]:(mt=r,r=f)):(mt=r,r=f);r!==f;)h.push(r),r=mt,(d=Jt())!==f?(44===n.charCodeAt(mt)?(o=U,mt++):(o=f,0===Tt&&kt(G)),o!==f&&(y=Jt())!==f&&(x=Zt())!==f?r=d=[d,o,y,x]:(mt=r,r=f)):(mt=r,r=f);h!==f?(St=t,t=a=q(a,h)):(mt=t,t=f)}else mt=t,t=f;return t}function Zt(){var t,a,h,r;return t=mt,(a=Ht())!==f&&Jt()!==f?(58===n.charCodeAt(mt)?(h=O,mt++):(h=f,0===Tt&&kt(k)),h!==f&&Jt()!==f&&(r=Mt())!==f?(St=t,t=a=B(a,r)):(mt=t,t=f)):(mt=t,t=f),t===f&&(t=mt,33===n.charCodeAt(mt)?(a=M,mt++):(a=f,0===Tt&&kt(z)),a===f&&(a=null),a!==f&&Jt()!==f&&(h=Ht())!==f?(St=t,t=a=Z(a,h)):(mt=t,t=f)),t}function Ht(){var t,a,h,r,d;return t=mt,a=mt,h=function(){var t,a,h,r;if(t=mt,e.test(n.charAt(mt))?(a=n.charAt(mt),mt++):(a=f,0===Tt&&kt(F)),a!==f){for(h=[],g.test(n.charAt(mt))?(r=n.charAt(mt),mt++):(r=f,0===Tt&&kt(p));r!==f;)h.push(r),g.test(n.charAt(mt))?(r=n.charAt(mt),mt++):(r=f,0===Tt&&kt(p));h!==f?t=a=[a,h]:(mt=t,t=f)}else mt=t,t=f;return t}(),(a=h!==f?n.substring(a,mt):h)!==f&&(St=t,a=H(a)),(t=a)===f&&(t=mt,42===n.charCodeAt(mt)?(a=W,mt++):(a=f,0===Tt&&kt(J)),a!==f&&(St=t,a=K()),(t=a)===f&&(t=mt,(a=Wt())!==f&&(h=Jt())!==f?(n.substr(mt,2)===N?(r=N,mt+=2):(r=f,0===Tt&&kt(Q)),r!==f&&Jt()!==f&&(d=Wt())!==f?(St=t,t=a=V(a,d)):(mt=t,t=f)):(mt=t,t=f),t===f&&(t=mt,(a=Wt())!==f&&(St=t,a=X(a)),t=a))),t}function Wt(){var t,a,h,r,d,o;if(t=mt,a=mt,h=mt,45===n.charCodeAt(mt)?(r=Y,mt++):(r=f,0===Tt&&kt(l)),r===f&&(r=null),r!==f){if(d=[],u.test(n.charAt(mt))?(o=n.charAt(mt),mt++):(o=f,0===Tt&&kt(i)),o!==f)for(;o!==f;)d.push(o),u.test(n.charAt(mt))?(o=n.charAt(mt),mt++):(o=f,0===Tt&&kt(i));else d=f;d!==f?h=r=[r,d]:(mt=h,h=f)}else mt=h,h=f;return(a=h!==f?n.substring(a,mt):h)!==f&&(St=t,a=c(a)),(t=a)===f&&(t=mt,n.substr(mt,3)===A?(a=A,mt+=3):(a=f,0===Tt&&kt(E)),a!==f&&(St=t,a=D(a)),(t=a)===f&&(t=mt,n.substr(mt,2)===L?(a=L,mt+=2):(a=f,0===Tt&&kt(I)),a!==f&&(St=t,a=P(a)),t=a)),t}function Jt(){var t,n;for(Tt++,t=[],(n=Kt())===f&&(n=Nt());n!==f;)t.push(n),(n=Kt())===f&&(n=Nt());return Tt--,t===f&&(n=f,0===Tt&&kt($)),t}function Kt(){var t,a,h,r,d,o;if(Tt++,t=mt,n.substr(mt,2)===tt?(a=tt,mt+=2):(a=f,0===Tt&&kt(nt)),a!==f){for(h=[],r=mt,d=mt,Tt++,at.test(n.charAt(mt))?(o=n.charAt(mt),mt++):(o=f,0===Tt&&kt(ht)),Tt--,o===f?d=void 0:(mt=d,d=f),d!==f?(n.length>mt?(o=n.charAt(mt),mt++):(o=f,0===Tt&&kt(ft)),o!==f?r=d=[d,o]:(mt=r,r=f)):(mt=r,r=f);r!==f;)h.push(r),r=mt,d=mt,Tt++,at.test(n.charAt(mt))?(o=n.charAt(mt),mt++):(o=f,0===Tt&&kt(ht)),Tt--,o===f?d=void 0:(mt=d,d=f),d!==f?(n.length>mt?(o=n.charAt(mt),mt++):(o=f,0===Tt&&kt(ft)),o!==f?r=d=[d,o]:(mt=r,r=f)):(mt=r,r=f);h!==f?t=a=[a,h]:(mt=t,t=f)}else mt=t,t=f;if(t===f)if(t=mt,n.substr(mt,2)===rt?(a=rt,mt+=2):(a=f,0===Tt&&kt(dt)),a!==f){for(h=[],r=mt,d=mt,Tt++,n.substr(mt,2)===ot?(o=ot,mt+=2):(o=f,0===Tt&&kt(yt)),Tt--,o===f?d=void 0:(mt=d,d=f),d!==f?(n.length>mt?(o=n.charAt(mt),mt++):(o=f,0===Tt&&kt(ft)),o!==f?r=d=[d,o]:(mt=r,r=f)):(mt=r,r=f);r!==f;)h.push(r),r=mt,d=mt,Tt++,n.substr(mt,2)===ot?(o=ot,mt+=2):(o=f,0===Tt&&kt(yt)),Tt--,o===f?d=void 0:(mt=d,d=f),d!==f?(n.length>mt?(o=n.charAt(mt),mt++):(o=f,0===Tt&&kt(ft)),o!==f?r=d=[d,o]:(mt=r,r=f)):(mt=r,r=f);h!==f?(n.substr(mt,2)===ot?(r=ot,mt+=2):(r=f,0===Tt&&kt(yt)),r!==f?t=a=[a,h,r]:(mt=t,t=f)):(mt=t,t=f)}else mt=t,t=f;return Tt--,t===f&&(a=f,0===Tt&&kt(s)),t}function Nt(){var t,a;if(Tt++,t=[],bt.test(n.charAt(mt))?(a=n.charAt(mt),mt++):(a=f,0===Tt&&kt(vt)),a!==f)for(;a!==f;)t.push(a),bt.test(n.charAt(mt))?(a=n.charAt(mt),mt++):(a=f,0===Tt&&kt(vt));else t=f;return Tt--,t===f&&(a=f,0===Tt&&kt(xt)),t}var Qt=a.util.makeUnroll(jt,a),Vt=a.util.makeAST(jt,a);if((h=d())!==f&&mt===n.length)return h;throw h!==f&&mt<n.length&&kt({type:"end"}),Bt(wt,Ct<n.length?n.charAt(Ct):null,Ct<n.length?Ot(Ct,Ct+1):Ot(Ct,Ct))}}}(),ASTcache=new _cacheLru.default;function dsl2ast(t,n){n.debug&&console.log("extraction: DEBUG: extraction tree DSL:\nextraction: DEBUG: | "+t);var a=ASTcache.get(t);if(void 0!==a)n.debug&&console.log("extraction: DEBUG: extraction tree AST: reusing from cache");else{n.debug&&console.log("extraction: DEBUG: extraction tree AST: generating from scratch");var h=new _asty.default,f=_pegjsUtil.default.parse(PEGparser,t,{makeAST:function(t,n,a,f){return h.create.apply(h,_toConsumableArray(f)).pos(t,n,a)}});if(null!==f.error)throw new Error("failed to parse extraction tree DSL:\n"+_pegjsUtil.default.errorMessage(f.error,!0).replace(/^/gm,"ERROR: "));a=f.ast,ASTcache.set(t,a)}if("Object"!==a.type()&&"Array"!==a.type())throw new Error("extraction tree DSL has to be an Object or Array at outmost scope");return n.debug&&console.log("extraction: DEBUG: extraction tree AST:\n"+a.dump().replace(/\r?\n$/,"").replace(/^/gm,"extraction: DEBUG: | ")),a}ASTcache.limit(64);
},{"asty":1,"cache-lru":2,"pegjs-util":3}],5:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _extractionSeen=_interopRequireDefault(_dereq_("./extraction-seen.js")),_extractionDsl=_interopRequireDefault(_dereq_("./extraction-dsl.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _slicedToArray(e,r){return _arrayWithHoles(e)||_iterableToArrayLimit(e,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,r){var n=[],t=!0,o=!1,c=void 0;try{for(var f,l=e[Symbol.iterator]();!(t=(f=l.next()).done)&&(n.push(f.value),!r||n.length!==r);t=!0);}catch(e){o=!0,c=e}finally{try{t||null==l.return||l.return()}finally{if(o)throw c}}return n}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var extractValue=function(e,r,n,t,o,c,f){return n.procValueBefore&&(e=n.procValueBefore(e,o)),n.debug&&console.log("extraction: DEBUG: match VALUE: path: ".concat(o,", depth: ").concat(t,", ")+"mode: ".concat(void 0!==f?"DEPTH":"MATCH",", ")+"graph: ".concat(_typeof(e),", AST: ").concat(null!==r?r.type():"null")),n.procValueAfter&&(e=n.procValueAfter(e,o)),e},extractObjectOrArray=function e(r,n,t,o,c,f,l){if(t.procValueBefore&&(r=t.procValueBefore(r,c)),"object"===_typeof(r)&&r instanceof Date)r=new Date(r.getTime());else if("object"===_typeof(r)&&r instanceof RegExp){var i="";r.global&&(i+="g"),r.ignoreCase&&(i+="i"),r.multiline&&(i+="m");var y=new RegExp(r.source,i);r.lastIndex&&(y.lastIndex=r.lastIndex),r=y}else{t.debug&&console.log("extraction: DEBUG: match OBJECT: path: ".concat(c,", depth: ").concat(o,", ")+"mode: ".concat(void 0!==l?"DEPTH":"MATCH",", ")+"graph: ".concat(_typeof(r),", AST: ").concat(null!==n?n.type():"null"));var a=f.get(r);if(a){if(null!==n&&n.childs().length>0)throw new Error('"'.concat(c,'": cannot extract parts of object already ')+'extracted at "'.concat(a,'"'));r=t.makeRefValue?t.makeRefValue(r,c,a):a}else{var d;f.set(r,c),void 0===l&&1===(d=n.childs()).length&&"Depth"===d[0].type()&&(l=o+d[0].get("depth"),d=void 0);var u=function(e,r,n){var t=!1,o=null;if(void 0!==r)t=!0;else for(var c=0;c<e.length;c++){var f=!1;if(e[c].get("id")===n)f=!0;else if(!0===e[c].get("any"))f=!0;else{var l=e[c].get("from"),i=e[c].get("to");void 0!==l&&void 0!==i&&l<=Number(n)&&Number(n)<=i&&(f=!0)}f&&(!0===e[c].get("not")?t=!1:(t=!0,1===(o=e[c]).childs().length&&(o=o.childs()[0])))}return[t,o]};if(r instanceof Array){var g=!1;if(null!==n&&"Property"===n.type())g=!0;else if(null!==n&&"Array"!==n.type()){if(!t.ignoreMatchErrors)throw new Error('extraction failed at "'.concat(c,'": ')+'found "Array", expected "'.concat(n.type(),'"'));g=!0}var b=[];if(!g&&(void 0===l||void 0!==l&&o<l))for(var m=0,_=0;m<r.length;m++){var x=_slicedToArray(u(d,l,m),2),w=x[0],T=x[1];w&&("object"===_typeof(r[m])&&null!==r[m]?b[_++]=e(r[m],T,t,o+1,"".concat(c,".").concat(m),f,l):b[_++]=extractValue(r[m],T,t,o+1,"".concat(c,".").concat(m),f,l))}r=b}else{var V=!1;if(null!==n&&"Property"===n.type())V=!0;else if(null!==n&&"Object"!==n.type()){if(!t.ignoreMatchErrors)throw new Error('extraction failed at "'.concat(c,'": ')+'found "Object", expected "'.concat(n.type(),'"'));V=!0}var A={};if(!V&&(void 0===l||void 0!==l&&o<l)){var j;j=t.getKeysOfObject?t.getKeysOfObject(r,c):Object.keys(r);for(var E=0;E<j.length;E++){var S=j[E],O=_slicedToArray(u(d,l,S),2),R=O[0];T=O[1];R&&("object"===_typeof(r[S])&&null!==r[S]?A[S]=e(r[S],T,t,o+1,"".concat(c,".").concat(S),f,l):A[S]=extractValue(r[S],T,t,o+1,"".concat(c,".").concat(S),f,l))}}r=A}}}return t.procValueAfter&&(r=t.procValueAfter(r,c)),r},extract=function(e,r,n){if("object"!==_typeof(e))throw new Error("invalid graph argument (expected object type)");if(null===e)throw new Error("invalid graph argument (expected not-null value)");if("string"!=typeof r)throw new Error("invalid tree argument (expected string type)");if(void 0===n&&(n={}),"object"!==_typeof(n))throw new Error("invalid options argument (expected object type)");var t=(0,_extractionDsl.default)(r,n),o=new _extractionSeen.default;return extractObjectOrArray(e,t,n,0,"@self",o,void 0)},_default=extract;exports.default=_default;
},{"./extraction-dsl.js":4,"./extraction-seen.js":7}],6:[function(_dereq_,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var reifyInternal=function e(t,r,c,f){r.procValueBefore&&(t=r.procValueBefore(t,c)),r.debug&&console.log("reify: DEBUG: path: ".concat(c,", graph: ").concat(_typeof(t)));if(r.isReference?r.isReference(t,c):"string"==typeof t&&t.match(/^@self(?:\..+|)$/)){var o;if(void 0===(o=r.getObject?r.getObject(t,c):f[t]))throw new Error('invalid object reference "'.concat(t,'" at path "').concat(c,'"'));t=o}else if(null!==t&&"object"===_typeof(t))if(r.setObject?r.setObject(t,c):f[c]=t,t instanceof Array)for(var l=0;l<t.length;l++)t[l]=e(t[l],r,"".concat(c,".").concat(l),f);else for(var n in t)Object.hasOwnProperty.call(t,n)&&(t[n]=e(t[n],r,"".concat(c,".").concat(n),f));return r.procValueAfter&&(t=r.procValueAfter(t,c)),t},reify=function(e,t){if("object"!==_typeof(e))throw new Error("invalid graph argument (expected object type)");if(null===e)throw new Error("invalid graph argument (expected not-null value)");if(void 0===t&&(t={}),"object"!==_typeof(t))throw new Error("invalid options argument (expected object type)");return reifyInternal(e,t,"@self",{"@self":e})},_default=reify;exports.default=_default;
},{}],7:[function(_dereq_,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var Seen="function"==typeof WeakMap?function(){function e(){_classCallCheck(this,e),this.seenMap=new WeakMap}return _createClass(e,[{key:"set",value:function(e,t){this.seenMap.set(e,t)}},{key:"get",value:function(e){return this.seenMap.get(e)}}]),e}():function(){function e(){_classCallCheck(this,e),this.seenSeq=[],this.seenMap={}}return _createClass(e,[{key:"set",value:function(e,t){this.seenMap[this.seenSeq.length]=t,this.seenSeq.push(e)}},{key:"get",value:function(e){var t=this.seenSeq.indexOf(e);return t>=0?this.seenMap[t]:void 0}}]),e}(),_default=Seen;exports.default=_default;
},{}],8:[function(_dereq_,module,exports){
"use strict";var _extractionExtract=_interopRequireDefault(_dereq_("./extraction-extract.js")),_extractionReify=_interopRequireDefault(_dereq_("./extraction-reify.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}module.exports={extract:_extractionExtract.default,reify:_extractionReify.default};
},{"./extraction-extract.js":5,"./extraction-reify.js":6}]},{},[8])(8)
});
